<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Documentazione API Corsi Pomeridiani</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; }
    nav { position: fixed; top: 0; left: 0; width: 240px; height: 100%; overflow-y: auto; background: #f5f5f5; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.1); }
    main { margin-left: 260px; padding: 20px; }
    h1, h2, h3 { color: #333; }
    pre { background: #f9f9f9; padding: 10px; border: 1px solid #ddd; overflow-x: auto; }
    code { background: #eef; padding: 2px 4px; }
    a { text-decoration: none; color: #0066cc; }
    a:hover { text-decoration: underline; }
    section { margin-bottom: 40px; }
  </style>
</head>
<body>

  <nav>
    <h2>Sezioni</h2>
    <ul>
      <li><a href="#auth">Autenticazione</a></li>
      <li><a href="#corsi">Corsi</a></li>
      <li><a href="#docenti">Docenti</a></li>
      <li><a href="#lezioni">Lezioni</a></li>
      <li><a href="#studenti">Studenti</a></li>
      <li><a href="#presenze">Presenze</a></li>
    </ul>
  </nav>

  <main>
    <h1>Documentazione API Corsi Pomeridiani</h1>

    <section id="auth">
      <h2>1. Autenticazione</h2>
      <p>
        Bootstrap <br>

        chiama /provision-school per inserire la tua scuola. <br>
        
        Bootstrapping Admin <br>
        
        chiama /auth/provision-admin per creare il primo amministratore associato a quella scuola. <br>
        
        Uso dell’API <br>
        
        L’admin logga con /auth/login, riceve access token → può chiamare POST /scuole (e poi POST /users) per creare nuove scuole e utenti. <br>
      </p>
      <h3>Request</h3>
      <pre><code>POST /auth/token
Content-Type: application/json

{
  "username": "utente01",
  "password": "password123"
}</code></pre>
      <h3>Response</h3>
      <pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  "access_token": "eyJhbGc...",
  "expires_in": 3600
}</code></pre>
    </section>

    <section id="corsi">
      <h2>2. Gestione Corsi</h2>

      <h3>2.1 Elenco Corsi</h3>
      <pre><code>GET /scuole/{school_id}/corsi
Authorization: Bearer {token}</code></pre>

      <h3>2.2 Creazione Corso <small>(solo <code>amministratore</code>)</small></h3>
      <pre><code>POST /scuole/{school_id}/corsi
Authorization: Bearer {token}
Content-Type: application/json

{
  "titolo": "Corso di Informatica",
  "descrizione": "Impara a programmare in Python",
  "orario": "15:00-17:00",
  "docente_id": "doc_001"
}</code></pre>

      <h3>2.3 Modifica Corso <small>(solo <code>amministratore</code>)</small></h3>
      <pre><code>PUT /scuole/{school_id}/corsi/{id}
Authorization: Bearer {token}
Content-Type: application/json

{
  "titolo": "Nuovo Titolo",
  "descrizione": "Descrizione aggiornata"
}</code></pre>

      <h3>2.4 Cancellazione Corso <small>(solo <code>amministratore</code>)</small></h3>
      <pre><code>DELETE /scuole/{school_id}/corsi/{id}
Authorization: Bearer {token}</code></pre>
    </section>

    <section id="docenti">
      <h2>3. Gestione Docenti</h2>

      <h3>3.1 Assegna Docente a Corso <small>(solo <code>amministratore</code>)</small></h3>
      <pre><code>PUT /scuole/{school_id}/corsi/{id}/docente
Authorization: Bearer {token}
Content-Type: application/json

{
  "docente_id": "doc_002"
}</code></pre>

      <h3>3.2 Elenco Corsi di un Docente</h3>
      <pre><code>GET /scuole/{school_id}/docenti/{id}/corsi
Authorization: Bearer {token}</code></pre>
    </section>

    <section id="lezioni">
      <h2>4. Programmazione Lezioni</h2>

      <h3>4.1 Inserimento Date Lezione <small>(<code>docente</code> o <code>amministratore</code>)</small></h3>
      <pre><code>POST /scuole/{school_id}/corsi/{id}/lezioni
Authorization: Bearer {token}
Content-Type: application/json

{
  "date": ["2025-04-22", "2025-04-25", "2025-05-04"]
}</code></pre>

      <h3>4.2 Calendario Lezioni</h3>
      <pre><code>GET /scuole/{school_id}/corsi/{id}/lezioni
Authorization: Bearer {token}</code></pre>
    </section>

    <section id="studenti">
      <h2>5. Gestione Studenti &amp; Iscrizioni</h2>

      <h3>5.1 Iscrizione Studente <small>(<code>studente</code> o operatore scuola)</small></h3>
      <pre><code>POST /scuole/{school_id}/corsi/{id}/iscrizioni
Authorization: Bearer {token}
Content-Type: application/json

{
  "studente_id": "stud_001"
}</code></pre>

      <h3>5.2 Disiscrizione Studente</h3>
      <pre><code>DELETE /scuole/{school_id}/corsi/{id}/iscrizioni/{studente_id}
Authorization: Bearer {token}</code></pre>

      <h3>5.3 Elenco Studenti Iscritti</h3>
      <pre><code>GET /scuole/{school_id}/corsi/{id}/studenti
Authorization: Bearer {token}</code></pre>
    </section>

    <section id="presenze">
      <h2>6. Gestione Presenze</h2>

      <h3>6.1 Registrazione Presenze <small>(solo <code>docente</code>)</small></h3>
      <pre><code>POST /scuole/{school_id}/lezioni/{id}/presenze
Authorization: Bearer {token}
Content-Type: application/json

{
  "presenze": ["stud_001", "stud_003"]
}</code></pre>

      <h3>6.2 Visualizza Presenze</h3>
      <pre><code>GET /scuole/{school_id}/lezioni/{id}/presenze
Authorization: Bearer {token}</code></pre>
    </section>

  </main>
</body>
</html>
